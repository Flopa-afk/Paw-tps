<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Attendance Table - Tutorial 2 (JS)</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background:#fafafa; }
  table { border-collapse: collapse; width: 100%; max-width: 1100px; margin: 0 auto; }
  th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: center; font-size: 14px; }
  th { background: #f5f5f5; font-weight: 600; }
  thead th { position: sticky; top: 0; z-index: 2; }
  .student-name { text-align: left; padding-left: 12px; }
  .status-good { background: #d8f5d8; }  
  .status-warn { background: #fff4cc; }   
  .status-bad  { background: #ffd6d6; }  
  .small { font-size:12px; }
  caption { font-size:18px; font-weight:700; margin-bottom: 8px; }
  .center { text-align:center; }
</style>
</head>
<body>

<table id="attendanceTable" aria-label="Attendance table">
  <caption>Tutorial 2 — Attendance (JS implementation)</caption>
  <thead>
    <tr>
      <th rowspan="2">Last Name</th>
      <th rowspan="2">First Name</th>
     
      <th colspan="2">S1</th>
      <th colspan="2">S2</th>
      <th colspan="2">S3</th>
      <th colspan="2">S4</th>
      <th colspan="2">S5</th>
      <th colspan="2">S6</th>
      <th rowspan="2">Absences</th>
      <th rowspan="2">Participations</th>
      <th rowspan="2">Message</th>
    </tr>
    <tr>
     
      <th>P</th><th>Pa</th>
      <th>P</th><th>Pa</th>
      <th>P</th><th>Pa</th>
      <th>P</th><th>Pa</th>
      <th>P</th><th>Pa</th>
      <th>P</th><th>Pa</th>
    </tr>
  </thead>

  <tbody>
    
    <tr data-student-index="0">
      <td class="student-name">ahmed</td>
      <td class="student-name">sara</td>
      
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" checked /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td class="absences small">0</td>
      <td class="parts small">0</td>
      <td class="message small"></td>
    </tr>
    <tr data-student-index="1">
      <td class="student-name">yacine</td>
      <td class="student-name">amira</td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" checked /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" checked /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" checked /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td class="absences small">0</td>
      <td class="parts small">0</td>
      <td class="message small"></td>
    </tr>
    <tr data-student-index="2">
      <td class="student-name">lyna</td>
      <td class="student-name">anes</td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" checked /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td><input class="present" type="checkbox" /></td><td><input class="part" type="checkbox" /></td>
      <td class="absences small">0</td>
      <td class="parts small">0</td>
      <td class="message small"></td>
    </tr>
  </tbody>
</table>

<script>
(function () {
  const TOTAL_SESSIONS = 6;

  function updateRow(row) {
    
    const presents = Array.from(row.querySelectorAll('input.present'));
    const parts = Array.from(row.querySelectorAll('input.part'));

    const presentCount = presents.reduce((s, cb) => s + (cb.checked ? 1 : 0), 0);
    const partCount = parts.reduce((s, cb) => s + (cb.checked ? 1 : 0), 0);
    const absences = TOTAL_SESSIONS - presentCount;

 
    const absCell = row.querySelector('.absences');
    const partsCell = row.querySelector('.parts');
    const msgCell = row.querySelector('.message');

    absCell.textContent = absences + (absences === 1 ? ' Abs' : ' Abs');
    partsCell.textContent = partCount + (partCount === 1 ? ' Par' : ' Par');

    
    row.classList.remove('status-good', 'status-warn', 'status-bad');
    if (absences < 3) row.classList.add('status-good');
    else if (absences <= 4) row.classList.add('status-warn');
    else row.classList.add('status-bad');

    
    let baseMsg = '';
    if (absences >= 5) {
      baseMsg = 'Excluded – too many absences – You need to participate more';
    } else if (absences >= 3) {
      baseMsg = 'Warning – attendance low – You need to participate more';
    } else {
      baseMsg = 'Good attendance – Excellent participation';
    }

   
    if (partCount <= 1 && absences < 5) {
    
      if (absences < 3) baseMsg = 'Good attendance – Participation low. You should participate more';
      else baseMsg = baseMsg + ' – Participation low';
    }

    msgCell.textContent = baseMsg;
  }

  function updateAll() {
    const rows = document.querySelectorAll('#attendanceTable tbody tr');
    rows.forEach(updateRow);
  }

  document.querySelectorAll('#attendanceTable input.present, #attendanceTable input.part')
    .forEach(input => input.addEventListener('change', updateAll));

  updateAll();
})();
</script>

</body>
</html>
